const fs = require('fs');

const checkIsFile = (file) => {  
  return fs.statSync(file).isFile()
}

const checkIsR = (file) => {
  try{
    fs.readFileSync(file)
    return true
  }catch(error){
    return false
  }
}

exports.copyFile = (origen,destino,w) => {

  if(!checkIsFile(origen)){
    throw new Error("El origen no es v√°lido");  
  }
  if(!checkIsR(origen)){
    throw new Error("El origen no se puede leer");  
  }
  if(checkIsFile(destino)){
    if(!w){
      throw new Error("El destino es un archivo existente. Intenta agregar parametro [w]");  
    }
  }

  const origen_ = fs.createReadStream(origen)
  const destino_ = fs.createWriteStream(destino)
  origen_.pipe(destino_)
   
}
